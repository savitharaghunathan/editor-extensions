/**
 * Batch Review Expandable Footer Styles
 * Compact, expandable panel that slides up from the footer
 */

/* Local CSS variables */
:root {
  --batch-review-glow-color: rgba(
    0,
    102,
    204,
    0.3
  ); /* Semi-transparent brand blue for pulse glow effect */
}

/* Base container */
.batch-review-expandable {
  background-color: var(--pf-t--global--background--color--200);
  border: 1px solid var(--pf-t--global--border--color--100);
  border-radius: var(--pf-t--global--border--radius--sm);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  margin-bottom: var(--pf-t--global--spacer--sm);
  overflow: hidden;
}

/* Collapsed state - minimal height */
.batch-review-expandable.collapsed {
  max-height: 48px;
  padding: var(--pf-t--global--spacer--sm) var(--pf-t--global--spacer--md);
}

/* Collapsed state content wrapper */
.batch-review-collapsed-content {
  width: 100%;
  min-height: 36px;
}

/* Highlight effect for collapsed state with pending files */
.batch-review-expandable.collapsed.batch-review-highlight {
  background-color: var(--pf-t--color--blue--50);
  border: 2px solid var(--pf-t--color--brand--default);
  box-shadow: 0 0 0 1px var(--pf-t--color--brand--default);
  animation: batch-review-pulse 2s ease-in-out infinite;
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .batch-review-expandable.collapsed.batch-review-highlight {
    animation: none;
    border-width: 3px;
  }
}

@keyframes batch-review-pulse {
  0% {
    box-shadow: 0 0 0 1px var(--pf-t--color--brand--default);
  }
  50% {
    box-shadow:
      0 0 0 3px var(--pf-t--color--brand--default),
      0 0 8px var(--batch-review-glow-color);
  }
  100% {
    box-shadow: 0 0 0 1px var(--pf-t--color--brand--default);
  }
}

/* Expanded state - takes up more space */
.batch-review-expandable.expanded {
  max-height: 50vh; /* 50% of viewport height */
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15);
}

/* Remove old expand trigger styles - now using PatternFly Button */

/* Expandable header */
.batch-review-expandable-header {
  padding: var(--pf-t--global--spacer--sm) var(--pf-t--global--spacer--md);
  background-color: var(--pf-t--global--background--color--100);
  border-bottom: 1px solid var(--pf-t--global--border--color--100);
}

/* Expandable footer */
.batch-review-expandable-footer {
  padding: var(--pf-t--global--spacer--sm) var(--pf-t--global--spacer--md);
  background-color: var(--pf-t--global--background--color--100);
  border-top: 1px solid var(--pf-t--global--border--color--100);
  margin-top: var(--pf-t--global--spacer--sm);
}

/* Ensure buttons in header don't get too cramped */
.batch-review-expandable-header .pf-v6-c-button {
  white-space: nowrap;
}

.batch-review-title {
  font-weight: var(--pf-t--global--font--weight--body--bold);
  font-size: var(--pf-t--global--font--size--md);
}

/* Current file section - compact */
.batch-review-current-file {
  padding: var(--pf-t--global--spacer--sm) var(--pf-t--global--spacer--md);
  background-color: var(--pf-t--global--background--color--primary--subtle);
  border-bottom: 1px solid var(--pf-t--global--border--color--100);
}

.batch-review-filename-compact {
  font-size: var(--pf-t--global--font--size--sm);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Actions section - horizontal layout for minimal height */
.batch-review-actions {
  padding: var(--pf-t--global--spacer--sm) var(--pf-t--global--spacer--md);
  background-color: var(--pf-t--global--background--color--100);
}

/* Decorator status message */
.batch-review-decorator-status {
  font-size: var(--pf-t--global--font--size--sm);
  color: var(--pf-t--global--text--color--subtle);
  font-style: italic;
}

/* Button sizing for compact layout */
.batch-review-actions button {
  white-space: nowrap;
}

.batch-review-actions .pf-v6-c-button.pf-m-control {
  min-width: 32px;
  padding: 0.25rem 0.5rem;
}

/* VS Code theme support */
.batch-review-expandable {
  background-color: var(--vscode-editor-background);
  border-color: var(--vscode-panel-border, #3c3f41);
}

.batch-review-expandable-header,
.batch-review-actions {
  background-color: var(--vscode-sideBar-background, var(--vscode-editor-background));
  border-color: var(--vscode-panel-border, #3c3f41);
}

.batch-review-current-file {
  background-color: var(--vscode-list-hoverBackground, rgba(255, 255, 255, 0.1));
}

/* Light theme adjustments */
.vscode-light .batch-review-expandable {
  filter: brightness(0.98);
}

.vscode-light .batch-review-current-file {
  background-color: var(--vscode-list-hoverBackground, rgba(0, 0, 0, 0.04));
}

/* Responsive - even more compact on mobile */
@media (max-width: 768px) {
  .batch-review-expandable.expanded {
    max-height: 60vh;
  }

  .batch-review-actions .pf-v6-l-flex {
    flex-wrap: wrap;
  }

  .batch-review-filename-compact {
    font-size: var(--pf-t--global--font--size--xs);
  }

  /* Stack header items on small screens */
  .batch-review-expandable-header .pf-v6-l-flex {
    flex-wrap: wrap;
    gap: var(--pf-t--global--spacer--sm);
  }

  .batch-review-expandable-header .batch-review-title {
    width: 100%;
  }
}

/* Animation for expand/collapse */
@keyframes slideUpFromBottom {
  from {
    max-height: 48px;
    opacity: 0.8;
  }
  to {
    max-height: 50vh;
    opacity: 1;
  }
}

@keyframes slideDownToBottom {
  from {
    max-height: 50vh;
    opacity: 1;
  }
  to {
    max-height: 48px;
    opacity: 0.8;
  }
}

.batch-review-expandable.expanded {
  animation: slideUpFromBottom 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.batch-review-expandable.collapsed {
  animation: slideDownToBottom 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Ensure smooth rendering */
.batch-review-expandable {
  contain: layout;
  will-change: max-height;
  backface-visibility: hidden;
  transform: translateZ(0);
}
